<!-- app/templates/camera_minimal.html -->
{% extends "base.html" %}

{% block title %}Kamera Test - Unkraut-2025{% endblock %}
{% block page_title %}ðŸ“· Kamera Test - Getrennte Dateien{% endblock %}

{% block content %}
<!-- Minimaler Test: NUR Foto-Button und Stream -->
<div class="card">
    <h3>ðŸ“¹ Live Kamera-Stream</h3>
    <div class="stream-container">
        <img id="camera-stream" 
             src="/api/camera/stream" 
             alt="Kamera Stream" 
             style="max-width: 100%; border-radius: 6px;">
    </div>
    
    <div style="text-align: center; margin: 20px 0;">
        <button id="capture-btn" class="btn btn-primary" onclick="captureImage()">
            ðŸ“¸ Foto aufnehmen
        </button>
    </div>
    
    <div style="margin-top: 20px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px;">
        <strong>Test-Status:</strong>
        <div id="test-status">Lade JavaScript...</div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- NUR eine einzige JavaScript-Datei! -->
<script src="{{ url_for('static', filename='js/camera_base.js') }}"></script>

<!-- Minimaler Test-Code direkt in HTML -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Test ob JavaScript geladen wurde
    const statusDiv = document.getElementById('test-status');
    if (statusDiv) {
        statusDiv.innerHTML = `
            âœ… JavaScript geladen<br>
            âœ… DOM bereit<br>
            ðŸ“± Touch Support: ${'ontouchstart' in window ? 'JA' : 'NEIN'}<br>
            ðŸŽ¯ captureImage Funktion: ${typeof captureImage === 'function' ? 'VERFÃœGBAR' : 'FEHLT'}
        `;
    }
});
</script>
{% endblock %}