<!-- unkraut/app/templates/camera.html -->
{% extends "base.html" %}

{% block title %}Kamera - Unkraut-2025{% endblock %}
{% block page_title %}📹 Kamera-Ansicht{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/camera_enhanced.css') }}">
{% endblock %}

{% block content %}
<!-- Live Stream & System Status -->
<div class="camera-layout">
    <!-- Live Stream Sektion -->
    <div class="live-stream-section">
        <h3>📹 Live Stream</h3>
        <div class="camera-stream-container">
            <img id="camera-stream" src="/api/camera/stream" alt="Kamera Stream">
        </div>
        <div class="stream-controls">
            <button class="btn btn-success" onclick="captureImage()">
                📸 Foto aufnehmen
            </button>
            <button class="btn btn-primary" onclick="detectWeeds()">
                🔍 Unkraut erkennen
            </button>
            <button class="btn btn-info" onclick="toggleStream()">
                📹 Stream an/aus
            </button>
        </div>
    </div>
    
    <!-- System Status Sektion -->
    <div class="system-stats-section">
        <h3>📊 Kamera-Statistiken</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-value" id="cpu-usage">-</div>
                <div class="stat-label">CPU Nutzung</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="ram-usage">-</div>
                <div class="stat-label">RAM Nutzung</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="cpu-temp">-</div>
                <div class="stat-label">CPU Temperatur</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="camera-status">-</div>
                <div class="stat-label">Kamera Status</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="arm-status">-</div>
                <div class="stat-label">Roboterarm</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="stream-fps">-</div>
                <div class="stat-label">Stream FPS</div>
            </div>
        </div>
        <button class="btn btn-primary" onclick="updateCameraStats()" data-full-width="true">
            🔄 Statistiken aktualisieren
        </button>
    </div>
</div>

<!-- KI-Ergebnisse -->
<div class="ki-results-section">
    <h3>🔍 KI-Ergebnisse</h3>
    <div id="detection-results" class="detection-display">
        Keine Erkennungen
    </div>
    <div class="ki-controls">
        <button class="btn btn-warning" onclick="continuousDetection()">
            📹 Kontinuierliche Erkennung
        </button>
        <button class="btn btn-secondary" onclick="clearResults()">
            🗑️ Ergebnisse löschen
        </button>
    </div>
</div>

<!-- Bildergalerie -->
<div class="gallery-section">
    <div class="gallery-header">
        <h3>📁 Aufgenommene Bilder</h3>
        <div class="gallery-stats">
            <span id="gallery-count">0 Bilder</span>
            <span id="gallery-size">0 MB</span>
        </div>
    </div>
    
    <div id="image-gallery" class="image-gallery">
        <div class="no-images">
            Keine Bilder aufgenommen
        </div>
    </div>
    
    <div class="gallery-controls">
        <button class="btn btn-info" onclick="loadImageGallery()">
            🔄 Galerie laden
        </button>
        <button class="btn btn-warning" onclick="downloadImages()">
            💾 Bilder herunterladen
        </button>
        <button class="btn btn-danger" onclick="clearImages()">
            🗑️ Alle löschen
        </button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/camera_enhanced.js') }}"></script>
{% endblock %}