{% extends "base.html" %}

{% block title %}Roboterarm - Unkraut-2025{% endblock %}
{% block page_title %}Roboterarm Steuerung{% endblock %}

{% block content %}
<div class="card">
    <h3>ğŸ¯ Preset-Positionen</h3>
    <div class="grid">
        <button class="btn btn-primary" onclick="moveToPreset('home')">ğŸ  Home Position</button>
        <button class="btn btn-success" onclick="moveToPreset('weed_detect')">ğŸ” Unkraut Erkennen</button>
        <button class="btn btn-warning" onclick="moveToPreset('weed_remove')">ğŸŒ¿ Unkraut Entfernen</button>
        <button class="btn btn-danger" onclick="emergencyStop()">ğŸš¨ Not-Stopp</button>
    </div>
</div>

<div class="card">
    <h3>ğŸ® Manuelle Servo-Steuerung</h3>
    <div class="grid">
        <div class="servo-control">
            <label class="servo-label">Base (Drehung): <span id="base-angle">90</span>Â°</label>
            <div class="servo-slider">
                <input type="range" min="0" max="180" value="90" class="slider" id="servo-base" oninput="moveServo('base', this.value)">
                <div class="servo-value" id="value-base">90Â°</div>
            </div>
        </div>
        
        <div class="servo-control">
            <label class="servo-label">Shoulder (Heben): <span id="shoulder-angle">90</span>Â°</label>
            <div class="servo-slider">
                <input type="range" min="0" max="180" value="90" class="slider" id="servo-shoulder" oninput="moveServo('shoulder', this.value)">
                <div class="servo-value" id="value-shoulder">90Â°</div>
            </div>
        </div>
        
        <div class="servo-control">
            <label class="servo-label">Elbow (Ellbogen): <span id="elbow-angle">90</span>Â°</label>
            <div class="servo-slider">
                <input type="range" min="0" max="180" value="90" class="slider" id="servo-elbow" oninput="moveServo('elbow', this.value)">
                <div class="servo-value" id="value-elbow">90Â°</div>
            </div>
        </div>
        
        <div class="servo-control">
            <label class="servo-label">Wrist (Handgelenk): <span id="wrist-angle">90</span>Â°</label>
            <div class="servo-slider">
                <input type="range" min="0" max="180" value="90" class="slider" id="servo-wrist" oninput="moveServo('wrist', this.value)">
                <div class="servo-value" id="value-wrist">90Â°</div>
            </div>
        </div>
        
        <div class="servo-control">
            <label class="servo-label">Gripper (Greifer): <span id="gripper-angle">90</span>Â°</label>
            <div class="servo-slider">
                <input type="range" min="0" max="180" value="90" class="slider" id="servo-gripper" oninput="moveServo('gripper', this.value)">
                <div class="servo-value" id="value-gripper">90Â°</div>
            </div>
        </div>
        
        <div class="servo-control">
            <label class="servo-label">Tool (Werkzeug): <span id="tool-angle">0</span>Â°</label>
            <div class="servo-slider">
                <input type="range" min="0" max="180" value="0" class="slider" id="servo-tool" oninput="moveServo('tool', this.value)">
                <div class="servo-value" id="value-tool">0Â°</div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <h3>ğŸ¤– Automatische Aktionen</h3>
    <div class="grid">
        <button class="btn btn-success" onclick="weedRemovalSequence()">ğŸŒ¿ Unkraut-Entfernung Sequenz</button>
        <button class="btn btn-primary" onclick="activateTool()">ğŸ”§ Werkzeug aktivieren (3s)</button>
        <button class="btn btn-warning" onclick="calibrateServos()">âš™ï¸ Servo-Kalibrierung</button>
        <button class="btn btn-info" onclick="getArmStatus()">ğŸ“Š Status anzeigen</button>
    </div>
</div>

<div class="card">
    <h3>ğŸ“Š Roboterarm Status</h3>
    <div id="arm-status" class="status-display">Lade Status...</div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/arm.js') }}"></script>
{% endblock %}